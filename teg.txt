Твиттер
Главная
Часто задаваемые вопросы
Приложения
API
Протокол
Схема
Какие функции есть у ботов?
Входы
Чат и выбор пользователя
Взаимодействия
Интеграция
Монетизация
Мини-приложения
Боты для бизнеса
Платежи
Веб-вход
HTML5-игры
Наклейки и пользовательские эмодзи
Поддержка языков
Управление ботами
Тестирование вашего бота
BotFather
Создание нового бота
О тексте, описании и профильных медиа
Генерация токена аутентификации
Передача права собственности
Команды BotFather
Редактировать ботов
Изменить настройки
Управление играми
Телеграм-ботыФункции Telegram-бота
Функции Telegram-бота
На этой странице подробно описаны отдельные элементы и функции бота . См. также:

Общий обзор бот-платформы
Полный справочник API для разработчиков
Какие функции есть у ботов?
Входы
Текст
Команды
Кнопки
Чат и выбор пользователя
Взаимодействия
В соответствии
Глубокие ссылки
Меню вложений
Интеграция
Мини-приложения
Боты для бизнеса
Платежи
Веб-вход
HTML5-игры
Наклейки
Монетизация
Поддержка языков
Управление ботами
Режим конфиденциальности
Тестирование вашего бота
Оповещения о статусе
Локальный API
BotFather, создание и управление ботами
Входы
Пользователи могут отправлять ботам сообщения любого типа , включая текст, файлы, местоположения, стикеры, голосовые сообщения и даже игральные кости, если повезёт. Однако боты Telegram предлагают множество других инструментов для создания гибких интерфейсов, адаптированных под ваши конкретные потребности:

Команды , которые выделяются в сообщениях и могут быть выбраны из списка после ввода /.
Клавиатуры , заменяющие клавиатуру пользователя с предопределенными вариантами ответов.
Кнопки , которые отображаются рядом с сообщениями бота.
Для еще большей гибкости веб-приложения поддерживают 100% настраиваемые интерфейсы с JavaScript.


Примечание: боты Telegram могут поддерживать несколько языков , которые адаптируются к языковым настройкам пользователя в приложении.

Команды
Команда — это простая /keywordкоманда, сообщающая боту, что делать. Приложения Telegram:

Выделение команд в сообщениях. Когда пользователь нажимает на выделенную команду, она немедленно отправляется повторно.
При вводе пользователем команды предлагается список поддерживаемых команд/ с описаниями (для этого необходимо предоставить список команд @BotFather или через соответствующий метод API ). Выбор команды из списка приводит к её немедленной отправке.
Показывать кнопку меню, содержащую все или некоторые команды бота (которые вы задаете через @BotFather ).
Команды всегда должны начинаться с /символа и содержать до 32 символов . Они могут содержать латинские буквы , цифры и символы подчёркивания , хотя для более чёткого вида рекомендуется использовать простой строчный текст.

Вот несколько примеров:

/следующий
/отмена
/новое местоположение
/newrule
Команды должны быть максимально конкретными — например /newlocation, или /newrule лучше, чем /newкоманда, которая затем требует от пользователя дополнительный параметр, такой как « location » или « rule ».


We require all developers to support several Global Commands to make sure Telegram bots offer a consistent and user-friendly experience.

Command Scopes
Your bot is able to show different commands to different users and groups – you can control this using scopes. For example, your bot could show additional commands to group admins or translate the list based on the user’s language_code.

Keep in mind that Bot API updates will not contain any information about the scope of a command sent by the user – in fact, they may contain commands that don’t exist at all in your bot. Your backend should always verify that received commands are valid and that the user was authorized to use them regardless of scope.

Bots with privacy mode enabled will only receive commands in groups under special conditions, see here.

Keyboards
Bots are able to interpret free text input from users, but offering specific suggestions is often more intuitive – this is where custom keyboards can be extremely useful.

Whenever your bot sends a message, it can display a special keyboard with predefined reply options (see ReplyKeyboardMarkup). Telegram apps that receive the message will display your keyboard to the user. Using any of the buttons will immediately send the respective text. This way you can drastically simplify and streamline user interaction with your bot.


Check out the one_time_keyboard parameter to automatically hide your bot's keyboard as soon as it's been used.

You can also customize the text placeholder in the input field by setting the input_field_placeholder parameter.

Inline Keyboards
There are times when you'd prefer to do things without sending any messages to the chat – like when a user is changing settings, toggling options or navigating search results. In such cases, you can use Inline Keyboards that are shown directly below their relevant messages.

Unlike with custom reply keyboards, pressing buttons on inline keyboards doesn't send messages to the chat. Instead, inline keyboards support buttons that can work behind the scenes or open different interfaces: callback buttons, URL buttons, switch-to-inline buttons, game buttons and payment buttons.


To provide a better user experience, consider editing your keyboard when the user toggles a setting button or navigates to a new page – this is both faster and smoother than sending a whole new message and deleting the previous one.

Menu Button
In all bot chats, a menu button appears near the message field. By default, tapping this button opens a menu that can hold some or all of a bot's commands, including a short description for each. Users can then select a command from the menu without needing to type it out.

You can set different texts of the menu button and its command descriptions for various individual users or groups of users – for example, showing translated text based on the user’s language, as explained here.

The menu button can alternatively be used to launch a Web App.

Global Commands
To make basic interactions more uniform, we ask all developers to support a few basic commands. Telegram apps will have interface shortcuts for these commands.

/start - begins the interaction with the user, like sending an introductory message. This command can also be used to pass additional parameters to the bot (see Deep Linking).
/help - returns a help message, like a short text about what your bot can do and a list of commands.
/settings - (if applicable) shows the bot's settings for this user and suggests commands to edit them.
Users will see a Start button the first time they open a chat with your bot. Help and Settings links will be available in the menu on the bot's profile page if you add them in @BotFather.

Chat and User Selection
Bots can present the user with a friendly and intuitive interface that lists any number of groups, channels or other users according to a custom set of criteria. Tapping on a chat will send its identifier to the bot in a service message and seamlessly close the interface.

A group management bot is the perfect example: an admin could select a chat the bot should manage, and then select a user it should promote – this would happen without ever typing any text.

Here is a quick start guide to use this feature:

Pick a set of criteria and store them in a KeyboardButtonRequestChat object (or KeyboardButtonRequestUser for users).
Create a KeyboardButton and store the criteria under request_chat or request_user respectively.
Send a ReplyKeyboardMarkup that contains the button you just created.
When the user selects a chat, you'll receive its identifier in a chat_shared or user_shared service message.
Keep in mind that the bot may not be able to use the identifier it receives if the corresponding chat or user is not already known or accessible by some other means.

Interactions
In addition to sending commands and messages to the chat with the bot, there are several ways of interacting with them without opening any specific chat or group.

Inline mode allows sending requests to bots right from the input field – from any chat on Telegram.
Deep linking allows special links that send certain parameters to the bot when opened.
Attachment menu integration makes it possible to use bots from the attachment menu in chats.
Inline Requests
Users can interact with your bot via inline queries straight from the message field in any chat. All they need to do is start a message with your bot's @username and enter a keyword.

Having received the query, your bot can return some results. As soon as the user selects one, it is sent to the relevant chat. This way, people can request and send content from your bot in any of their chats, groups or channels.

Remember that inline functionality has to be enabled via @BotFather, or your bot will not receive inline Updates.


Examples of inline bots include @gif, @bing and @wiki. Web App bots can also be used inline – try typing @durgerkingbot in any chat.

Deep Linking
Telegram bots have a deep linking mechanism that allows additional parameters to be passed to the bot on startup. It could be a command that launches the bot – or an authentication token to connect the user's Telegram account to their account on another platform.

Each bot has a link that opens a conversation with it in Telegram – https://t.me/<bot_username>. Parameters can be added directly to this link to let your bot work with additional information on the fly, without any user input.

A-Z, a-z, 0-9, _ and - are allowed. We recommend using base64url to encode parameters with binary and other types of content. The parameter can be up to 64 characters long.

Private Chats
In private chats, you can use the start parameter to automatically pass any value to your bot whenever a user presses the link. For example, you could use:

https://t.me/your_bot?start=airplane
When someone opens a chat with your bot via this link, you will receive:

/start airplane
Groups
In groups, you can add the parameter startgroup to this link. For example:

https://t.me/your_bot?startgroup=spaceship
Following a link with this parameter prompts the user to select a group to add the bot to – the resulting update will contain text in the form:

/start@your_bot spaceship
Web Apps also support deep linking, for more information check out our dedicated guide.

Attachment Menu
Certain bots can be added directly to a user’s attachment menu – giving them easy access to the bot in any chat. Currently, this option is restricted to certain approved bots, but may be expanded later.

Try adding @DurgerKingBot to your attachment menu.

Integration
There are various ways of further integrating bots with Telegram and other services.

Use Web Apps to replace any website.
Build tools and integrate business services.
Accept Payments via third-party payment providers that support integration with Bots and Mini Apps.
Connect to Telegram using the Web Login functionality.
Create gaming bots by integrating HTML5 Games.
Help users create and manage Telegram Stickers.
Monetization
Telegram offers a robust ecosystem of monetization features, allowing any bot to support its development with multiple revenue streams.

Telegram Stars
Telegram Stars power all digital transactions between bots and users. Users can acquire Stars through in-app purchases via Apple and Google or via @PremiumBot.

Bots can use the Stars they receive to increase message limits, send gifts to users or accept rewards in Toncoin.


Digital Products
Services can use their bot to sell digital goods and services – like online courses, commissioned artwork and items in games.

Paid Media
Bots can post paid photos and videos – and users are only allowed to view the media after paying to unlock it. This functionality is available to all bots – including bot admins in channels and bots managing Telegram Business accounts.

Subscription Plans
Developers are able to offer paid subscriptions to their bot – adding multiple tiers of content and features tailored to their audience.

Revenue Sharing from Telegram Ads
Developers can participate in revenue sharing from Telegram Ads – receiving 50% of the revenue from ads that appear in the chat with their bot.

Mini Apps
Mini Apps allow developers to create infinitely flexible interfaces that can be launched right inside Telegram – integrating seamlessly with the app and replacing any website.

If your bot is a mini app, you can add a prominent Launch app button as well as demo videos and screenshots to the bot’s profile. To do this, go to @BotFather and set up your bot's Main Mini App.

Mini apps are covered in detail in our dedicated guide – you should read it carefully to learn the wide variety of features they can offer.

If you develop a mini app, be sure to follow our design guidelines – you'll want your custom interface to seamlessly integrate into the app to provide users the best possible experience.

Seamless Integration With Telegram
Mini apps integrate seamlessly with Telegram – from receiving detailed theme settings to using native dialogs for reading QR codes, controlling biometrics, sharing media directly to stories and more.

When opened from a direct link in a group, mini apps can also use the chat_instance parameter to track of the current context, supporting shared usage by multiple chat members – to create live whiteboards, group orders, multiplayer games and much more.

Mini App Previews
Developers can upload screenshots and video demos of their mini app right from the bot's profile page – giving users an overview of the app's features and functionality. These media previews will be shown to any user who views your app – like in the Mini App Store or via Search.


Previews support multiple languages – so you can upload translated versions of your previews that will be shown to users based on their app language.

Mini App Store
More than 500 million out of Telegram's 950 million users interact with mini apps every month. Successful mini apps have the chance to be highlighted in the Telegram Mini App Store – appearing for all users in the 'Apps' tab of Search.

Featured mini apps are chosen based on how they enrich the Telegram ecosystem. To increase the chances of being featured, you must enable the Main Mini App in @BotFather, upload high-quality media demos showcasing your app to your bot's profile and accept payments in Telegram Stars.

Check out our documentation to learn more about enabling Main Mini Apps and accepting payments in Stars.

Home Screen Shortcuts
Users can place direct shortcuts to specific mini apps on the home screen of their devices – accessing their favorite games and services in one tap.

Customizable Loading Screens
The loading screen of mini apps can be customized in @Botfather – where developers can add their own icon and set specific colors for both light and dark themes.

To customize your loading screen, go to @Botfather > /mybots > Select bot > Bot Settings > Configure Mini App > Configure Splash Screen. You can tap on Open Splash Screen Preview to see the final result.

Full-Screen Mode
Mini apps are able to use the entire screen in portrait or landscape orientation – allowing for immersive games and media with expanded gestures and interfaces.

Setting Emoji Status
Users can set an emoji status inside mini apps or give an app permission to update it automatically.

Developers can also integrate APIs from other services or request geolocation access – instantly changing a user's status when they start a game 🎮 or leave the office 💼.

Sharing Media
Media generated in mini apps can be shared in any chat – letting users effortlessly send referral codes and custom images to contacts, groups and channels. Alternatively, users can download it with a native popup.

Sharing from Mini Apps to Stories
Any media created by the mini app, like whiteboard snapshots, leaderboards and AI-generated videos can be opened with the native story editor via the shareToStory method – for users to share as a Telegram Story right from the mini app.

Мини-приложения также получают ряд событий , что позволяет им мгновенно реагировать на действия пользователя. Подробнее о доступных событиях можно узнать здесь .

Доступ к геолокации
Мини-приложения могут получать разрешения на определение местоположения от пользователей, что дает разработчикам возможность создавать игры с учетом местоположения и интерактивные карты событий.

Отслеживание движения устройства
Мини-приложения могут запрашивать данные об ускорении , ориентации и вращении от устройств в режиме реального времени, открывая поддержку управления движением и возможностей виртуальной реальности .

Информация об оборудовании устройства
Устройство пользователя может отправлять мини-приложениям базовую информацию об оборудовании , такую как его вычислительная мощность и объём памяти. Мини-приложения могут использовать эту информацию для оптимизации графики и автоматической настройки параметров для максимально плавной работы.

Боты для бизнеса
Боты могут включить бизнес-режим , что позволит подписчикам Telegram Business подключать их к своей учетной записи, оптимизируя и автоматизируя управление личными чатами и взаимодействие с клиентами.

Владелец аккаунта может указать, к каким чатам ваш бот имеет доступ. В этих чатах бот будет получать все обновления, обычно поддерживаемые Bot API , за исключением сообщений, отправленных им самим и другими ботами. В зависимости от настроек бизнес-подключения, ваш бот также может отправлять сообщения и выполнять другие действия от имени владельца аккаунта в чатах, которые были активны за последние 24 часа.

Вот краткое руководство по интеграции вашего бота с Telegram Business:

Включите бизнес-режим для вашего бота в @BotFather .
Обрабатывайте входящие обновления BusinessConnection , сигнализируя о том, что пользователь установил , отредактировал или завершил Business Connection с вашим ботом.
Обрабатывайте деловые сообщения путем обработки business_messageи обновлений edited_business_message.deleted_business_messages
Проверьте разрешения на запись вашего бота can_replyв последнем обновлении BusinessConnection .
Если разрешено, используйте business_connection_idполе в sendMessage , sendChatAction и других методах отправки для связи от имени бизнес-пользователя.
Пользователи, которые подключат вашего бота к своей учетной записи, увидят панель быстрых действий в верхней части каждого управляемого чата — нажатие на «Управление ботом» перенаправит их к вашему боту, который получит сообщение с глубокой ссылкой в формате /start bizChat<user_chat_id>.

Обратите внимание, что использование ботов в Telegram регулируется Условиями обслуживания разработчиков ботов Telegram . В частности, для пользователей Telegram Business убедитесь, что вы прочитали и поняли раздел 5.4 .

Платежи
Если ваш бот или мини-приложение продаёт цифровые товары и услуги , обязательно проводите оплату в Telegram Stars , указав XTRвалюту. В соответствии с политикой сторонних магазинов, Telegram не поддерживает продажу цифровых товаров и услуг в других валютах.

Боты Telegram могут принимать платежи благодаря удобному и оптимизированному интерфейсу, который собирает все необходимые данные пользователя. Telegram не собирает никаких платежных данных, например, данные кредитной карты пользователя, а отправляет их напрямую одному из поддерживаемых сторонних платежных провайдеров .

Вот краткое руководство по внедрению платежей:

Выберите провайдера и получите соответствующий токен , а также тестовый токен от провайдера « Stripe TEST MODE ».
Реализуйте платежи через соответствующие методы API .
Проверьте свою реализацию, используя тестовый токен вместе с тестовой кредитной картой .
Затем, чтобы выставить счет и обработать поток заказов:

Отправьте пользователю счет за предлагаемые вами товары или услуги.
Подтвердите заказ и подтвердите оплату с помощью answerPreCheckoutQuery .
Подтвердите платеж, проверив сообщение об успешном проведении платежа .
Отгрузить товар или оказать услуги.
Более подробную информацию вы можете получить, ознакомившись с нашими полными и исчерпывающими руководствами по продаже товаров и услуг в Telegram. Они включают в себя актуальные контрольные списки, параметры и подробные описания методов:

Руководство по цифровым товарам и услугам
Руководство по физическим товарам и услугам

Telegram не обрабатывает платежи напрямую, не хранит данные о заказах и не взимает комиссию. Счета направляются непосредственно стороннему платежному провайдеру.
Поэтому все споры должны решаться в судебном порядке между пользователем, разработчиком бота и платежным провайдером. Подробнее об этом можно узнать в Политике конфиденциальности .

Веб-вход
Telegram предлагает гибкий , лёгкий и бесплатный фреймворк для аутентификации пользователей на любом веб-сайте и в любом приложении. Его можно использовать для объединения вашей платформы с Telegram, обеспечивая пользователям бесперебойную работу. Вы также можете смело использовать этот фреймворк для реализации быстрого входа на вашем сайте без регистрации , независимо от того, подключен ли он к Telegram.

Виджеты
Виджет входа в Telegram — это простой и безопасный способ авторизации пользователей на вашем сайте.

Выберите бота — в идеале его имя и фотография профиля должны совпадать с названием и логотипом сайта.
Используйте /setdomainкоманду в @BotFather , чтобы связать бота с доменом вашего сайта.
Настройте свой виджет с помощью нашего специального инструмента и встройте его на свой сайт.
Встроенный вход
Когда пользователи открывают ваш сайт через встроенную кнопку , вы можете использовать параметр login_url в качестве альтернативы виджетам входа. Таким образом, вы сможете автоматически авторизовать пользователей на вашем сайте или в приложении ещё до загрузки страницы.


Обязательно ознакомьтесь с нашим руководством по аутентификации полученных данных, а также с нашим примером кода .

HTML5-игры
Боты могут служить автономными игровыми платформами — с нашим API HTML5 Gaming вы можете разрабатывать многопользовательские или однопользовательские игры и дать своим пользователям возможность весело провести время, сравнивая рейтинги , очки и многое другое.

Чтобы начать, выполните следующие простые шаги:

Отправьте /newgameкоманду @BotFather
Предоставьте текст описания , изображение или, по желанию, GIF-файл, чтобы продемонстрировать игровой процесс.
Отправьте игру пользователям через метод sendGame или через встроенный запрос.
Когда кто-то захочет поиграть, вы получите соответствующий ответ game_short_nameв CallbackQuery.
Чтобы запустить игру, укажите URL-адрес игры HTML5 в качестве urlпараметра answerCallbackQuery.
Затем, для обработки рекордов :

Используйте setGameScore для публикации рекордов в чате игры.
Используйте getGameHighScores для получения игровых таблиц рекордов.
Вы также можете встроить кнопку «Поделиться» в свою игру, поэкспериментировать с пользовательскими встроенными кнопками , параметрами URL и многим другим. Чтобы получить более полное представление, обязательно ознакомьтесь со следующими материалами:

Руководство по играм HTML5
Документация по API бота HTML5 Games
Игры
Ознакомьтесь с примерами того, что можно сделать с помощью нашей игровой платформы, на сайтах @GameBot и @gamee .

Наклейки и пользовательские эмодзи
Стикеры и эмодзи — это уникальная функция Telegram, которой пользуются миллионы пользователей, чтобы ежедневно делиться своими работами. Стикеры и эмодзи могут быть самыми разными: от простых изображений до плавной векторной анимации и высокодетализированных .WEBM-видео .

Все эти форматы поддерживаются нашим API для ботов , который позволяет ботам создавать , редактировать , удалять и делиться новыми наборами изображений на лету. API импорта Telegram позволяет пользователям переносить наборы с других платформ и приложений со стикерами.

Создание нового пакета
Чтобы создать новый пакет , просто:

Подготовьте свое произведение искусства в соответствии с нашими техническими требованиями .
Создайте новый набор стикеров с помощью createStickerSet . Выберите sticker_typeзначение «Обычный» , чтобы создать набор стикеров, или « Пользовательский эмодзи» , чтобы создать набор собственных эмодзи. Прикрепите файлы , которые хотите включить в набор, в виде массива InputSticker.
Вы можете использовать addStickerToSet для добавления стикеров или эмодзи позже.
Дополнительные функции:
обычные стикеры и пользовательские эмодзи поддерживают ключевые слова , которые пользователи могут ввести для быстрого поиска соответствующего изображения. Это может быть полезно, когда у стикера нет очевидной связи с конкретным эмодзи. Вы можете использовать keywordsпараметр в InputSticker , чтобы задать их.

Пользовательские эмодзи дополнительно поддерживают адаптивные цвета — они всегда будут соответствовать текущему контексту (например, белый на фотографиях, акцентный цвет при использовании в качестве статуса и т. д.); чтобы включить эту функцию, используйте needs_repaintingпараметр в createStickerSet .

Как только вы закончите создавать и делиться своими работами, не забудьте ознакомиться с нашими оставшимися методами работы с наклейками, чтобы узнать, как редактировать , удалять и даже менять порядок ваших наклеек.

Обратите внимание, что эти методы будут работать только с пакетами, созданными ботом, который их вызывает .

Поддержка языков
Боты могут адаптировать свои интерфейсы для поддержки нескольких языков , оперативно обновляя входные данные и информацию. Код языка пользователя добавляется в каждое соответствующее обновление в виде тега языка IETF , что позволяет ботам адаптироваться соответствующим образом.

Мы рекомендуем вам следовать нашим рекомендациям, чтобы обеспечить наилучший пользовательский опыт .

Ваши интерфейсы, тексты и встроенные результаты должны легко адаптироваться к language_code без вмешательства пользователя.
Подключенные веб-приложения получат language_code пользователя — ваша HTML-страница должна его учитывать.
Игры HTML5 могут получать информацию о языке, указав её в качестве параметра URL . Этот параметр можно сгенерировать из поля language_code объекта User , передаваемого с помощью начального игрового CallbackQuery .
Текст «Имя» , «Описание» и «О нас» бота можно локализовать с помощью соответствующих методов .
Списки команд также можно указать для отдельных языков — подробнее об этом здесь .
Поле language_code необязательно и может быть пустым. Если вы ориентируетесь на широкую аудиторию, ваш код всегда должен использовать либо последний записанный языковой тег, либо английский (именно в таком порядке), если поле отсутствует для конкретного пользователя .

Управление ботами
Режим конфиденциальности
Боты часто добавляются в группы для выполнения базовых задач или помощи модераторам, например, для автоматической публикации объявлений компании или даже для празднования дней рождения. По умолчанию все боты , добавленные в группы, работают в режиме конфиденциальности и видят только соответствующие сообщения и команды:

Команды, явно предназначенные для них (например, /command@this_bot).
Общие команды (например, /start), если бот был последним ботом, отправившим сообщение группе.
Встроенные сообщения, отправленные через бота.
Ответы на любые сообщения, явно или неявно предназначенные для этого бота.
Все боты также получат, независимо от режима конфиденциальности :

Все сервисные сообщения.
Все сообщения из личных чатов.
Все сообщения с каналов, в которых они участвуют.
Режим приватности по умолчанию включён для всех ботов, кроме ботов, добавленных в группу в качестве администраторов (администраторы ботов всегда получают все сообщения ). Его можно отключить, чтобы бот получал все сообщения как обычный пользователь (для вступления изменений в силу бота потребуется повторно добавить его в группу). Мы рекомендуем использовать это только в тех случаях, когда это действительно необходимо для работы бота. В большинстве случаев принудительный ответ на сообщения бота должен быть более чем достаточным.

Режим конфиденциальности
Этот режим не только повышает конфиденциальность пользователей, но и делает бота более эффективным, сокращая количество обрабатываемых им входных данных. Пользователи всегда могут видеть текущие настройки конфиденциальности бота в списке участников группы.

Тестирование вашего бота
Вы можете быстро протестировать своего бота , не мешая его пользователям, просто запустив другой экземпляр кода на другом аккаунте бота. Для этого создайте нового бота через @BotFather , получите его токен и используйте его в тестовом экземпляре вашего кода.

Все дальнейшее тестирование и отладку можно проводить в частном порядке на новом боте, не затрагивая исходный экземпляр.

Если вам нужно обмениваться ссылками на файлы между ботами, учтите, что file_idполе привязано к одному идентификатору бота, поэтому ваш тестовый экземпляр не может использовать общую file_idбазу данных для быстрой отправки медиафайлов — файлы должны быть загружены повторно по отдельности.

Специализированная тестовая среда
Telegram также предлагает специальную тестовую среду, подходящую для более продвинутого тестирования. В этой среде боты и пользователи, как правило, имеют более гибкие ограничения, например:

При работе с тестовой средой вы можете использовать HTTP-ссылки без TLS для тестирования своих веб-приложений или веб-входа .
В тестовой среде лимиты на флуд не повышаются, а иногда могут быть даже более строгими. Чтобы минимизировать влияние этого фактора на ваш бот, убедитесь, что он обрабатывает ошибки с помощью политик повторных попыток и не зависит от жёстко заданных лимитов.

Создание бота в тестовой среде
Тестовая среда полностью отделена от основной среды, поэтому вам потребуется создать новую учетную запись пользователя и нового бота с @BotFather .

Чтобы создать учетную запись и войти в систему, воспользуйтесь одним из следующих способов:

iOS : нажмите 10 раз на значок «Настройки» > «Учетные записи» > «Войти в другую учетную запись» > «Тест».
Telegram Desktop : откройте ☰ Настройки > Shift + Alt + щелкните правой кнопкой мыши «Добавить учетную запись» и выберите «Тестовый сервер».
macOS : нажмите значок «Настройки» 10 раз, чтобы открыть меню отладки, ⌘ + нажмите «Добавить учетную запись» и войдите в систему, используя номер телефона.
После входа в систему просто создайте нового бота , следуя стандартной процедуре, и отправляйте запросы в API тестового бота в следующем формате:

https://api.telegram.org/bot<token>/test/METHOD_NAME
При работе с тестовой средой вы можете использовать HTTP-ссылки без TLS в urlполе LoginUrl и WebAppInfo .

Оповещения о статусе
Миллионы выбирают Telegram за его скорость. Чтобы ваш бот приносил максимальную пользу пользователям, он также должен быть отзывчивым . Чтобы помочь разработчикам поддерживать ботов в отличном состоянии, @BotFather будет отправлять оповещения о статусе, если обнаружит что-то не так.

Мы проверяем количество ответов и коэффициент конверсии запросов/ответов для популярных ботов (~300 запросов в минуту, это значение может измениться в будущем). Если ваш бот вернёт аномально низкое число , вы получите уведомление от @BotFather .

Реагирование на оповещения
По умолчанию вы будете получать только одно оповещение от каждого бота в час .

Каждое оповещение имеет следующие кнопки:

Исправлено — используйте эту кнопку, если вы обнаружили проблему с ботом и исправили её. Если вы нажмёте кнопку «Исправить», мы возобновим отправку оповещений в обычном режиме, чтобы вы могли проверить, сработало ли исправление, в течение 5–10 минут, а не ждать целый час.
Поддержка — используйте эту ссылку, чтобы открыть чат с @BotSupport , если вы не видите никаких проблем с вашим ботом или считаете, что проблема на нашей стороне.
Отключить уведомления на 8 ч/1 нед. — используйте этот вариант, если вы не можете исправить бота в данный момент. Это отключит все оповещения для данного бота на указанный период времени. Мы не рекомендуем использовать эту опцию, так как ваши пользователи могут перейти на более стабильного бота. Вы можете включить оповещения в настройках бота через @BotFather .
Отслеживаемые проблемы
В настоящее время мы уведомляем вас о следующих проблемах:

Отправлено слишком мало личных сообщений. Значение: {value} — ваш бот отправляет гораздо меньше сообщений, чем в предыдущие недели. Это полезно для ботов, работающих в стиле новостной рассылки и отправляющих сообщения без запроса от пользователей. Чем больше значение, тем заметнее разница.

Слишком мало ответов на входящие личные сообщения . Коэффициент конверсии: {value} — ваш бот не отвечает на все отправляемые ему сообщения (коэффициент конверсии запросов/ответов для вашего бота был слишком низким как минимум в двух из последних трёх пятиминутных периодов).

Для обеспечения комфортного пользовательского опыта, пожалуйста, отвечайте на все сообщения, отправляемые вашему боту. Отвечайте на обновления сообщений, вызывая методы send… (например, sendMessage ).

Слишком мало ответов на встроенные запросы . Коэффициент конверсии: {value} — ваш бот отвечает не на все отправленные ему встроенные запросы. Рассчитывается так же, как указано выше. Отвечайте на inline_queryобновления, вызывая answerInlineQuery .
Слишком мало ответов на запросы обратного вызова . Коэффициент конверсии: {value}
Слишком мало ответов на запросы обратного вызова в играх . Коэффициент конверсии: {value} — ваш бот не отвечает на все отправленные ему запросы обратного вызова (с играми или без них), рассчитываемые так же, как указано выше. Отвечайте на callback_queryобновления, вызывая answerCallbackQuery .
API локального бота
Вы можете разместить и использовать собственный экземпляр нашего API бота с открытым исходным кодом .
Исходный код доступен здесь , как и краткое руководство по установке .

После установки сервера не забудьте использовать метод logOut перед перенаправлением запросов на новый локальный URL-адрес API.

Ваш локальный экземпляр работает на порту 8081по умолчанию и принимает только HTTP-запросы, поэтому для обработки удаленных HTTPS-запросов необходимо использовать прокси-сервер завершения TLS.

Размещая наш API локально, вы получите доступ к некоторым обновлениям , включая:

API	Максимальная загрузка файла	Макс. загрузка файлов	URL-адрес WHook	Порт WHook	WHook Max Connections
Официальный	20 МБ	50 МБ	HTTPS	443,80,88,8443	1-100
Местный	Безлимитный	2000 МБ	HTTP	Любой порт	1-100000
Полный список можно найти здесь .
Все ограничения могут быть изменены в будущем, поэтому обязательно следите за @BotNews .

BotFather
Ниже приведено подробное руководство по использованию @BotFather , инструмента Telegram для создания и управления ботами.

Создание нового бота
Используйте /newbotкоманду для создания нового бота. @BotFather запросит у вас имя и имя пользователя, а затем сгенерирует токен аутентификации для вашего нового бота.

Имя вашего бота отображается в контактных данных и в других местах .

Имя пользователя — это короткое имя, используемое в поиске, упоминаниях и ссылках t.me. Длина имени пользователя составляет от 5 до 32 символов, оно нечувствительно к регистру, но может содержать только латинские буквы, цифры и подчёркивание. Имя пользователя вашего бота должно заканчиваться на «bot», например, «tetris_bot» или «TetrisBot».

Токен — это строка, например 110201543:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw, , необходимая для авторизации бота и отправки запросов к API бота. Храните токен в безопасности: любой желающий может использовать его для управления вашим ботом.

В отличие от имени бота, имя пользователя нельзя изменить позже, поэтому выбирайте его внимательно.
При отправке запроса на api.telegram.org не забудьте добавить слово «bot» к вашему токену.

О тексте, описании и профильных медиа
Когда новые пользователи откроют вашего бота, они увидят полезное описание в поле под названием «Что умеет этот бот?».

Правильная настройка этого поля в @BotFather позволяет всем сразу получить представление о том, что может делать ваш бот — ваше описание должно быть кратким , по существу и по теме .

Вы также можете добавить в это поле фотографию или видео с Edit Description Pictureпомощью @BotFather .

Кроме того, как и у обычных пользователей, в профиле бота есть краткая биография . Если вы не указали это поле при создании бота, вы можете добавить его в любой момент с помощью /setabouttextкоманды @BotFather . Пользователи могут взаимодействовать со многими ботами, и после их запуска у них не будет доступа к их описанию — краткое напоминание о цели бота может быть очень полезным.

Обратите внимание, что текст «Описание» и « О нас» можно локализовать на родном языке — каждый пользователь автоматически увидит правильный перевод на свой язык.

У ботов также может быть фотография профиля — следует выбрать что-то уникальное и оригинальное, чтобы пользователи могли легко найти ее в списке чата.

Начиная с 21 апреля 2023 года ( Telegram 9.6 ) вы можете редактировать своего бота прямо со страницы его профиля, включая установку пользовательского видео профиля .

Генерация токена аутентификации
Если ваш существующий токен скомпрометирован или вы по какой-то причине его потеряли , используйте /tokenкоманду для генерации нового.

Передача права собственности
Вы можете передать право собственности на своего бота другому пользователю .
Для этого отправьте сообщение /mybots, выберите своего бота и передайте право собственности .
Передать право собственности на бота можно только тем пользователям, которые взаимодействовали с ним хотя бы один раз.

Передача прав владения предоставит полный контроль над ботом другому пользователю: он сможет просматривать сообщения бота и даже удалять его. Передача бессрочная, поэтому, пожалуйста, отнеситесь к ней внимательно.

Команды BotFather
Остальные команды вполне понятны:

/mybots – возвращает список ваших ботов с удобными элементами управления для редактирования их настроек.
/mygames – делает то же самое для ваших игр.
Редактировать ботов
Чтобы отредактировать своего бота, у вас есть два варианта.

Вы можете использовать доступные команды:

/setname – изменить имя вашего бота .
/setdescription – изменить описание бота (короткий текст длиной до 512 символов). Пользователи увидят этот текст в начале диалога с ботом под названием « Что умеет этот бот? ».
/setabouttext – изменить информацию о боте , установив более короткий текст длиной до 120 символов. Пользователи увидят этот текст на странице профиля бота. Когда они делятся вашим ботом с кем-то, этот текст отправляется вместе со ссылкой.
/setuserpic – изменить картинку профиля бота .
/setcommands – изменить список команд, поддерживаемых вашим ботом. Пользователи будут видеть эти команды в качестве подсказок при вводе текста /в чате с вашим ботом. Подробнее см. в разделе «Команды» .
/setdomain – привязать домен веб-сайта к вашему боту. См. раздел «Виджеты входа» .
/deletebot – удалить бота и освободить его имя пользователя . Невозможно отменить.
Или вы можете использовать /mybotsкоманду, нажать на своего бота и использовать современный встроенный интерфейс для его редактирования.

Начиная с 21 апреля 2023 года ( Telegram 9.6 ) вы можете редактировать общедоступную информацию вашего бота непосредственно на странице его профиля, включая установку пользовательского видео профиля .

Изменить настройки
/setinline – включить встроенный режим для вашего бота.
/setinlinegeo – запрос данных о местоположении для предоставления встроенных результатов на основе местоположения.
/setjoingroups – включить или отключить возможность добавления вашего бота в группы . Все боты должны иметь возможность обрабатывать личные сообщения, но если ваш бот не предназначен для работы в группах, вы можете отключить эту возможность.
/setinlinefeedback – включает или выключает отправку API обновлений о результатах, выбранных пользователями. Подробное объяснение см. здесь .
/setprivacy – определяет, какие сообщения будет получать ваш бот при добавлении в группу. Подробнее см. в разделе «Режим конфиденциальности» .
Управление играми
/newgame – создать новую игру.
/listgames – просмотреть список ваших игр.
/editgame – редактировать игру.
/deletegame – удалить существующую игру.
Обратите внимание, что изменения вступят в силу в течение нескольких минут.

Обладая этой информацией, вы готовы перейти к нашему полному справочнику API для разработчиков .

Если у вас есть вопросы, ознакомьтесь с разделом FAQ по боту .
Если у вас возникли проблемы с нашим API, свяжитесь с @BotSupport в Telegram.
Телеграмма
Telegram — это облачный мессенджер для мобильных устройств и компьютеров. Быстро и безопасно.
О Telegram
Часто задаваемые вопросы
Приватность
Для СМИ
Для мобильных
iPhone/iPad
Андроид
Мобильная веб-версия
Для компьютера
ПК/Mac/Linux
macOS
Веб-версия
Платформы
API
Переводы
Мгновенный просмотр
Наверх